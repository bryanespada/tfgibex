{% extends '../base/base.html' %}
{% block content %}

{% include '../base/error_messages.html' %}
<div class="right_col" role="main">
    <div class="">
        <div class="page-title">
            <div class="title_left">
                <h3>{{ peripheral_block.title }}</h3>
            </div>
        </div>

        <div class="clearfix"></div>

        <div class="row">

            <div class="col-12">
                <div class="x_panel"> 
                    <div class="col mail_view">
                        <div class="inbox-body">
                            <div class="mail_heading row">
                                <div class="col-md-12">
                                    <h4> {{ peripheral_block.surgery_type }}</h4>
                                </div>
                            </div>
                            <div class="view-mail">
                                {{ peripheral_block.description|linebreaksbr }}
                            </div>                                     
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="col-12">
                <div class="x_panel">
                    <div class="col mail_view">
                        <div class="inbox-body">
                            <div class="mail_heading row">
                                <div class="col-md-12">
                                    <h4>Images</h4>
                                </div>
                            </div>
                            <div class="view-mail">
                                <div class="mt-3 images-gallery" style="cursor: pointer !important;">
                                    <div class="row">
                                        {% for image in images %}
                                        <div class="gallery-item col-12 col-sm-6 col-md-4 col-lg-2 mb-4 blog">
                                            <div class="image view view-first" style="width: 100%; height: 100%; cursor: pointer;">
                                                <img style="width: 100%; height: 100%; display: block; object-fit: cover;" src="{{ image.image.url }}" alt="image">
                                            </div>
                                            <b id="image-name-{{ image.id }}" class="d-none"> {{ image.title }} </b>
                                            <p id="image-description-{{ image.id }}" class="d-none"> {{ image.description }} </p>
                                        </div>
                                        {% endfor %}
                                    </div>
                                </div>  
                            </div>                                     
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-12">
                <div class="x_panel">
                    <div class="col mail_view">
                        <div class="inbox-body">
                            <div class="mail_heading row">
                                <div class="col-md-12">
                                    <h4>Video</h4>
                                </div>
                            </div>
                            <div class="view-mail">
                                <div class="mt-8 p-4">
                                    <iframe src="https://player.vimeo.com/video/70591644?h=b8c796fff8&title=0&byline=0&portrait=0" width="100%" height="500px" frameborder="0" allow="autoplay; fullscreen" allowfullscreen></iframe>
                                </div>  
                            </div>                                     
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="imageModal" tabindex="-1" role="dialog" aria-labelledby="imageModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalTitle">Detalles de la imagen</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-7">
                        <img id="modalImage" src="" class="img-fluid" alt="Image">
                    </div>
                    <div class="col-md-5">
                        <div class="modal-description">
                            <p id="modalDescription"></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>




<script>
    $(document).ready(function() {
        // Handler for modal
        $('.gallery-item').click(function() {
            var imageUrl = $(this).find('img').attr('src');
            var title = $(this).find('b').text();
            var description = $(this).find('p').text();

            $('#modalImage').attr('src', imageUrl);
            $('#modalDescription').text(description);
            $('#modalTitle').text(title);
            $('#imageModal').modal('show');
        });
    });
</script>

{% endblock %}